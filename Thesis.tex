% A LaTeX template for MSc Thesis submissions to 
% Politecnico di Milano (PoliMi) - School of Industrial and Information Engineering
%
% S. Bonetti, A. Gruttadauria, G. Mescolini, A. Zingaro
% e-mail: template-tesi-ingind@polimi.it
%
% Last Revision: October 2021
%
% Copyright 2021 Politecnico di Milano, Italy. NC-BY

\documentclass{Configuration_Files/PoliMi3i_thesis}

%------------------------------------------------------------------------------
%	REQUIRED PACKAGES AND  CONFIGURATIONS
%------------------------------------------------------------------------------

% CONFIGURATIONS
\usepackage{parskip} % For paragraph layout
\usepackage{setspace} % For using single or double spacing
\usepackage{emptypage} % To insert empty pages
\usepackage{multicol} % To write in multiple columns (executive summary)
\setlength\columnsep{15pt} % Column separation in executive summary
\setlength\parindent{10pt} % Indentation
\raggedbottom  

% PACKAGES FOR TITLES
\usepackage{titlesec}
% \titlespacing{\section}{left spacing}{before spacing}{after spacing}
\titlespacing{\section}{0pt}{3.3ex}{2ex}
\titlespacing{\subsection}{0pt}{3.3ex}{1.65ex}
\titlespacing{\subsubsection}{0pt}{3.3ex}{1ex}
\usepackage{color}

% PACKAGES FOR LANGUAGE AND FONT
\usepackage[english]{babel} % The document is in English  
\usepackage[utf8]{inputenc} % UTF8 encoding
\usepackage[T1]{fontenc} % Font encoding
\usepackage[11pt]{moresize} % Big fonts

% PACKAGES FOR IMAGES
\usepackage{graphicx}
\usepackage{svg}
\usepackage{transparent} % Enables transparent images
\usepackage{eso-pic} % For the background picture on the title page
%\usepackage{subfig} % Numbered and caption subfigures using \subfloat.
\usepackage[export]{adjustbox}
\usepackage{tikz} % A package for high-quality hand-made figures.
\usetikzlibrary{}
\graphicspath{{./Images/}} % Directory of the images
\usepackage{caption} % Coloured captions
\usepackage{subcaption}
\usepackage{xcolor} % Coloured captions
\usepackage{amsthm,thmtools,xcolor} % Coloured "Theorem"
\usepackage{float}

% STANDARD MATH PACKAGES
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{bm}
\usepackage{cancel}
\usepackage[overload]{empheq} % For braced-style systems of equations.
\usepackage{fix-cm} % To override original LaTeX restrictions on sizes

% PACKAGES FOR TABLES
\usepackage{tabularx}
\usepackage{longtable} % Tables that can span several pages
\usepackage{colortbl}

% PACKAGES FOR ALGORITHMS (PSEUDO-CODE)
\usepackage{algorithm}
\usepackage{algorithmic}

% PACKAGES FOR REFERENCES & BIBLIOGRAPHY
\usepackage[colorlinks=true,linkcolor=black,anchorcolor=black,citecolor=black,filecolor=black,menucolor=black,runcolor=black,urlcolor=black]{hyperref} % Adds clickable links at references
\usepackage{cleveref}
\usepackage[square, numbers, sort&compress]{natbib} % Square brackets, citing references with numbers, citations sorted by appearance in the text and compressed
\bibliographystyle{abbrvnat} % You may use a different style adapted to your field

% OTHER PACKAGES
\usepackage{pdfpages} % To include a pdf file
\usepackage{afterpage}
\usepackage{lipsum} % DUMMY PACKAGE
\usepackage{fancyhdr} % For the headers
\usepackage{fancyvrb}
\usepackage[acronym]{glossaries}
\usepackage{enumitem} 
\fancyhf{}

\usepackage{listings}

\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

% Input of configuration file. Do not change config.tex file unless you really know what you are doing. 
\input{Configuration_Files/config}

%----------------------------------------------------------------------------
%	NEW COMMANDS DEFINED
%----------------------------------------------------------------------------

% EXAMPLES OF NEW COMMANDS
\newcommand{\bea}{\begin{eqnarray}} % Shortcut for equation arrays
\newcommand{\eea}{\end{eqnarray}}
\newcommand{\e}[1]{\times 10^{#1}}  % Powers of 10 notation

%----------------------------------------------------------------------------
%	ADD YOUR PACKAGES (be careful of package interaction)
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
%	ADD YOUR DEFINITIONS AND COMMANDS (be careful of existing commands)
%----------------------------------------------------------------------------

\input{Thesis_Acronyms}

%----------------------------------------------------------------------------
%	BEGIN OF YOUR DOCUMENT
%----------------------------------------------------------------------------

\begin{document}

\fancypagestyle{plain}{%
\fancyhf{} % Clear all header and footer fields
\fancyhead[RO,RE]{\thepage} %RO=right odd, RE=right even
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}}

%----------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------

\pagestyle{empty} % No page numbers
\frontmatter % Use roman page numbering style (i, ii, iii, iv...) for the preamble pages

\puttitle{
	title=Automated generation of efficient fuzzers for games using libFuzzer and RuleBook, % Title of the thesis
	name=Cem Cebeci, % Author Name and Surname
	course=Computer Science and Engineering \\Ingegneria Informatica, % Study Programme (in Italian)
	ID  =  10837160,  % Student ID number (numero di matricola)
	advisor= Prof. Giovanni Agosta, % Supervisor name
	coadvisor= Massimo Fioravanti, % Co-Supervisor name, remove this line if there is none
	academicyear={2023-2024},  % Academic Year
} % These info will be put into your Title page 

%----------------------------------------------------------------------------
%	PREAMBLE PAGES: ABSTRACT (inglese e italiano), EXECUTIVE SUMMARY
%----------------------------------------------------------------------------
\pagebreak

\startpreamble
\setcounter{page}{1} % Set page counter to 1

% ABSTRACT IN ENGLISH
\chapter*{Abstract} 
Fuzzing is the practice of repeatedly calling a program with semi-random inputs.
It is a popular technique to discover bugs and vulnerabilities in software.
Despite the increasing popularity of fuzzing, it is not a commonly used technique to find bugs in games.
One major factor in this is that games developed today are integrated with a game engine which controls the input, output and the main loop of the final software product.
This makes it difficult to fuzz the game logic in isolation without having to fuzz the game engine code, which is often much larger than the game logic itself.
Another factor is that games often have complex input patterns. They do not operate on a single large input but instead on a multitude of actions taken on them by the players.
These actions must be taken according to some potentially complex rules.
Even if a fuzzer knows all possible actions it can take on a game, generating valid sequences of actions can be a difficult task.

RuleBook (RL) is a novel domain specific language designed to describe games and other rule-heavy simulations.
In RL, games are described as sequential scenarios that suspend their execution on some special statements, waiting for an action to be taken on them.
They specify the actions that can be taken on them at any point of execution, along with dynamically evaluated constraints on these actions.

In this work, we propose a method to utilize RL descriptions of games to automatically generate fuzzers for them.
These fuzzers can interpret an arbitrary sequence of bytes as a sequence of valid actions on the game.
Then, we identify two factors that significantly affect the performance of game fuzzers: the number of generated unavailable actions and the number of picked illegal inputs.
Then, we describe methods to reduce these factors in the emitted fuzzers.
We measure the performance of four versions of fuzzers generated with this method, varying on how much information about the target game they utilize, along with two versions of fuzzers generated using OpenSpiel's game implementations.
Using three sample games, we demonstrate that the fuzzers generated from RL descriptions are as performant as their OpenSpiel counterparts.
Furthermore, we show that between RL fuzzers, versions that make the most use of the information RL exposes perform the best.
\\
\\
\textbf{Keywords:} compilers, fuzzing, games

% ABSTRACT IN ITALIAN
\chapter*{Abstract in lingua italiana}
Il fuzzing è la pratica di richiamare ripetutamente un programma con input semi-casuali.
È una tecnica popolare per scoprire bug e vulnerabilità nel software.
Nonostante la crescente popolarità del fuzzing, non è una tecnica comunemente utilizzata per trovare bug nei giochi.
Un fattore importante è che i giochi sviluppati oggi sono integrati con un motore di gioco che controlla l'input, l'output e il ciclo principale del prodotto software finale.
Ciò rende difficile eseguire il fuzzing della logica di gioco in modo isolato senza dover eseguire il fuzzing del codice del motore di gioco, che spesso è molto più grande della logica di gioco stessa.
Un altro fattore è che i giochi hanno spesso modelli di input complessi. Non operano su un unico grande input, ma su una moltitudine di azioni eseguite dai giocatori.
Queste azioni devono essere eseguite secondo regole potenzialmente complesse.
Anche se un fuzzer conosce tutte le possibili azioni che può compiere su un gioco, generare sequenze valide di azioni può essere un compito difficile.

RuleBook (RL) è un nuovo linguaggio specifico per il dominio, progettato per descrivere giochi e altre simulazioni che richiedono regole.
In RL, i giochi sono descritti come scenari sequenziali che sospendono la loro esecuzione su alcune dichiarazioni speciali, in attesa che venga eseguita un'azione su di essi.
I giochi specificano le azioni che possono essere intraprese in qualsiasi momento dell'esecuzione, insieme a vincoli valutati dinamicamente su queste azioni.

In questo lavoro, proponiamo un metodo per utilizzare le descrizioni RL dei giochi per generare automaticamente fuzzer per essi.
Questi fuzzer possono interpretare una sequenza arbitraria di byte come una sequenza di azioni valide sul gioco.
Poi, identifichiamo due fattori che influenzano significativamente le prestazioni dei fuzzer di gioco: il numero di azioni non disponibili generate e il numero di input illegali selezionati.
Descriviamo quindi i metodi per ridurre questi fattori nei fuzzer emessi.
Misuriamo le prestazioni di quattro versioni di fuzzer generati con questo metodo, a seconda della quantità di informazioni sul gioco di destinazione che utilizzano, insieme a due versioni di fuzzer generati utilizzando le implementazioni di gioco di OpenSpiel.
Utilizzando tre giochi campione, dimostriamo che i fuzzer generati dalle descrizioni RL hanno le stesse prestazioni delle loro controparti OpenSpiel.
Inoltre, dimostriamo che tra i fuzzer RL, le versioni che sfruttano maggiormente le informazioni esposte da RL sono le più performanti.
\\
\\
\textbf{Parole chiave:} compilers, fuzzing, giochi
%----------------------------------------------------------------------------
%	LIST OF CONTENTS/FIGURES/TABLES/SYMBOLS
%----------------------------------------------------------------------------

% TABLE OF CONTENTS
\thispagestyle{empty}
\tableofcontents % Table of contents 
\thispagestyle{empty}
\cleardoublepage

%-------------------------------------------------------------------------
%	THESIS MAIN TEXT
%-------------------------------------------------------------------------
% In the main text of your thesis you can write the chapters in two different ways:
%
%(1) As presented in this template you can write:
%    \chapter{Title of the chapter}
%    *body of the chapter*
%
%(2) You can write your chapter in a separated .tex file and then include it in the main file with the following command:
%    \chapter{Title of the chapter}
%    \input{chapter_file.tex}
%
% Especially for long thesis, we recommend you the second option.

\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics
\mainmatter % Begin numeric (1,2,3...) page numbering

% --------------------------------------------------------------------------
% NUMBERED CHAPTERS % Regular chapters following
% --------------------------------------------------------------------------
\chapter{Introduction}
\input{Introduction.tex}
\chapter{Background}
\input{Background.tex}
\chapter{State of the art}
\input{StateOfTheArt.tex}
\chapter{Solution design}\label{solutionDesign}
\input{SolutionDesign.tex}
\chapter{Evaluation}
\input{Evaluation.tex}
\chapter{Conclusion}
\input{Conclusion.tex}

%-------------------------------------------------------------------------
%	BIBLIOGRAPHY
%-------------------------------------------------------------------------

\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics
\bibliography{Thesis_bibliography} % The references information are stored in the file named "Thesis_bibliography.bib"

%-------------------------------------------------------------------------
%	APPENDICES
%-------------------------------------------------------------------------

\cleardoublepage
\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics
% \appendix
% \chapter{Appendix A}
% If you need to include an appendix to support the research in your thesis, you can place it at the end of the manuscript.
% An appendix contains supplementary material (figures, tables, data, codes, mathematical proofs, surveys, \dots)
% which supplement the main results contained in the previous chapters.

% \chapter{Appendix B}
% It may be necessary to include another appendix to better organize the presentation of supplementary material.
\printglossary[type=\acronymtype]

% LIST OF FIGURES
\listoffigures

% LIST OF TABLES
% \listoftables

% % LIST OF SYMBOLS
% % Write out the List of Symbols in this page
% \chapter*{List of Symbols} % You have to include a chapter for your list of symbols (
% \begin{table}[H]
%     \centering
%     \begin{tabular}{lll}
%         \textbf{Variable} & \textbf{Description} & \textbf{SI unit} \\\hline\\[-9px]
%         $\bm{u}$ & solid displacement & m \\[2px]
%         $\bm{u}_f$ & fluid displacement & m \\[2px]
%     \end{tabular}
% \end{table}

\cleardoublepage

\end{document}
